{"ast":null,"code":"// eslint-disable-next-line\nimport remarkTableMock from \"./remarkTableMock\";\nimport MockUtils from \"./mock.utils\";\nexport default function mockRemarks(mock) {\n  mock.onPost(\"api/remarks\").reply(({\n    data\n  }) => {\n    const {\n      remark\n    } = JSON.parse(data);\n    const {\n      carId,\n      text = \"\",\n      dueDate = \"01/01/2019\",\n      type = 0\n    } = remark;\n    const id = generateRemarkId();\n    const newRemark = {\n      id,\n      carId: +carId,\n      text,\n      dueDate,\n      type\n    };\n    remarkTableMock.push(newRemark);\n    return [200, {\n      remark: newRemark\n    }];\n  });\n  mock.onPost(/api\\/remarksfind\\/\\d+/).reply(config => {\n    const urls = config.url.split(\"/\");\n    const id = urls[2];\n    const mockUtils = new MockUtils();\n    const {\n      queryParams\n    } = JSON.parse(config.data);\n    const productRemarks = remarkTableMock.filter(el => el.carId === +id);\n    const filterdRemarks = mockUtils.baseFilter(productRemarks, queryParams);\n    return [200, filterdRemarks];\n  });\n  mock.onPost(\"api/remarks/deleteRemarks\").reply(config => {\n    const {\n      ids\n    } = JSON.parse(config.data);\n    ids.forEach(id => {\n      const index = remarkTableMock.findIndex(el => el.id === id);\n\n      if (index > -1) {\n        remarkTableMock.splice(index, 1);\n      }\n    });\n    return [200];\n  });\n  mock.onGet(/api\\/remarks\\/\\d+/).reply(config => {\n    const id = config.url.match(/api\\/remarks\\/(\\d+)/)[1];\n    const remark = remarkTableMock.find(el => el.id === +id);\n\n    if (!remark) {\n      return [400];\n    }\n\n    return [200, remark];\n  });\n  mock.onPut(/api\\/remarks\\/\\d+/).reply(config => {\n    const id = config.url.match(/api\\/remarks\\/(\\d+)/)[1];\n    const {\n      remark\n    } = JSON.parse(config.data);\n    const index = remarkTableMock.findIndex(el => el.id === +id);\n\n    if (!index) {\n      return [400];\n    }\n\n    remarkTableMock[index] = { ...remark\n    };\n    return [200];\n  });\n  mock.onDelete(/api\\/remarks\\/\\d+/).reply(config => {\n    const id = config.url.match(/api\\/remarks\\/(\\d+)/)[1];\n    const index = remarkTableMock.findIndex(el => el.id === +id);\n    remarkTableMock.splice(index, 1);\n\n    if (!index === -1) {\n      return [400];\n    }\n\n    return [200];\n  });\n}\n\nfunction generateRemarkId() {\n  const ids = remarkTableMock.map(el => el.id);\n  const maxId = Math.max(...ids);\n  return maxId + 1;\n}","map":{"version":3,"sources":["/home/khatnaa/Desktop/project/src/app/modules/ECommerce/__mocks__/mockRemark.tsx"],"names":["remarkTableMock","MockUtils","mockRemarks","mock","onPost","reply","data","remark","JSON","parse","carId","text","dueDate","type","id","generateRemarkId","newRemark","push","config","urls","url","split","mockUtils","queryParams","productRemarks","filter","el","filterdRemarks","baseFilter","ids","forEach","index","findIndex","splice","onGet","match","find","onPut","onDelete","map","maxId","Math","max"],"mappings":"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","sourcesContent":["// eslint-disable-next-line\r\nimport remarkTableMock from \"./remarkTableMock\";\r\nimport MockUtils from \"./mock.utils\";\r\n\r\nexport default function mockRemarks(mock) {\r\n  mock.onPost(\"api/remarks\").reply(({ data }) => {\r\n    const { remark } = JSON.parse(data);\r\n    const { carId, text = \"\", dueDate = \"01/01/2019\", type = 0 } = remark;\r\n    const id = generateRemarkId();\r\n    const newRemark = {\r\n      id,\r\n      carId: +carId,\r\n      text,\r\n      dueDate,\r\n      type\r\n    };\r\n    remarkTableMock.push(newRemark);\r\n    return [200, { remark: newRemark }];\r\n  });\r\n\r\n  mock.onPost(/api\\/remarksfind\\/\\d+/).reply(config => {\r\n    const urls = config.url.split(\"/\");\r\n    const id = urls[2];\r\n    const mockUtils = new MockUtils();\r\n    const { queryParams } = JSON.parse(config.data);\r\n    const productRemarks = remarkTableMock.filter(el => el.carId === +id);\r\n    const filterdRemarks = mockUtils.baseFilter(productRemarks, queryParams);\r\n    return [200, filterdRemarks];\r\n  });\r\n\r\n  mock.onPost(\"api/remarks/deleteRemarks\").reply(config => {\r\n    const { ids } = JSON.parse(config.data);\r\n    ids.forEach(id => {\r\n      const index = remarkTableMock.findIndex(el => el.id === id);\r\n      if (index > -1) {\r\n        remarkTableMock.splice(index, 1);\r\n      }\r\n    });\r\n    return [200];\r\n  });\r\n\r\n  mock.onGet(/api\\/remarks\\/\\d+/).reply(config => {\r\n    const id = config.url.match(/api\\/remarks\\/(\\d+)/)[1];\r\n    const remark = remarkTableMock.find(el => el.id === +id);\r\n    if (!remark) {\r\n      return [400];\r\n    }\r\n\r\n    return [200, remark];\r\n  });\r\n\r\n  mock.onPut(/api\\/remarks\\/\\d+/).reply(config => {\r\n    const id = config.url.match(/api\\/remarks\\/(\\d+)/)[1];\r\n    const { remark } = JSON.parse(config.data);\r\n    const index = remarkTableMock.findIndex(el => el.id === +id);\r\n    if (!index) {\r\n      return [400];\r\n    }\r\n\r\n    remarkTableMock[index] = { ...remark };\r\n    return [200];\r\n  });\r\n\r\n  mock.onDelete(/api\\/remarks\\/\\d+/).reply(config => {\r\n    const id = config.url.match(/api\\/remarks\\/(\\d+)/)[1];\r\n    const index = remarkTableMock.findIndex(el => el.id === +id);\r\n    remarkTableMock.splice(index, 1);\r\n    if (!index === -1) {\r\n      return [400];\r\n    }\r\n\r\n    return [200];\r\n  });\r\n}\r\n\r\nfunction generateRemarkId() {\r\n  const ids = remarkTableMock.map(el => el.id);\r\n  const maxId = Math.max(...ids);\r\n  return maxId + 1;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}